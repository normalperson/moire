<div class="panel panel-success panel-dark">
	<div class="panel-heading">
		<div>{$paneltitle}
			<div class="panel-heading-controls">
                
				<!-- <div class="panel-heading-icon">
					View cases
					<i class="fa  fa-angle-double-right"></i>
				</div> -->
			</div>
		</div>					
	</div>
    <div class="panel-body">
       <div id="salebyqty" style="height:400px">

       </div>
    </div>
</div>		
<div id="nograph_jobbycat" class="hidden">{$Home->noGraph()}</div>

<script type="text/javascript">
$( document ).ready(function() {
    console.log('inside document ready');
    var data = {$data},
        category = {$xAxis},
        showgraph = {$showgraph},
        gtitle = "{'Monthly sales'|tl:false:'widget'}",
        gsubtitle = "{'by quantity'|tl:false:'widget'}",
        gyAxisTitle = "{'Quantity'|tl:false:'widget'}",
        gsuffix = "{'item'|tl:false:'widget'}";
    console.log(data);        
    console.log(category);        
{literal}  
    if(showgraph){
    	$('#salebyqty').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: gtitle
            },
            subtitle: {
                text: gsubtitle
            },
            xAxis: {
                categories: category,
                title: {
                    text: null
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: gyAxisTitle,
                    align: 'high'
                },
                labels: {
                    overflow: 'justify'
                }
            },
            tooltip: {
                valueSuffix: gsuffix
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        enabled: true
                    }
                }
            },        
            credits: {
                enabled: false
            },
            series: data
        });
    }else{
        $('#salebyqty').append($('#nograph_jobbycat').removeClass("hidden"));
    }
});
</script>
{/literal}